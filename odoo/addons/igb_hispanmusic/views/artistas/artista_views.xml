<!--
  Author: Ivan Gonzalez Barrasa (barrasa.dev)
  File: artista_views.xml
  Path: ~/Proyectos/HispanMusic/CRM-hspnmsc/odoo/addons/igb_hispanmusic/views
  Created: 2025-02-14 15:51
  Last Updated: 2025-02-14 15:51
-->

<odoo>
    <record id="action_artista_tree" model="ir.actions.act_window">
        <field name="name">Artistas</field>
        <field name="res_model">igb_hispanmusic.artista</field>
        <field name="view_mode">tree,form,kanban</field>
    </record>

    <!-- Formulario -->
    <record id="view_artista_form" model="ir.ui.view">
        <field name="name">igb_hispanmusic.artista.form</field>
        <field name="model">igb_hispanmusic.artista</field>
        <field name="arch" type="xml">
            <form string="Artista">
                <sheet>
                    <group col="3" style="width: 100%;">
                        <!-- Informaci贸n Principal -->
                        <group col="2" style="width: 75%;">
                            <group string="Informacion" style="width: 100%;">
                                <field name="nombre_real" colspan="2" style="width: 100%;"/>
                                <field name="nombre_artistico" colspan="2" style="width: 100%;"/>
                                <field name="email" style="width: 100%;"/>
                            </group>
                            <group string="Contacto" style="width: 100%;">
                                <field name="telefono" style="width: 100%;"/>
                                <field name="telegram" style="width: 100%;"/>
                                <field name="instagram" style="width: 100%;"/>
                            </group>
                            <group string="Redes" style="width: 100%;">
                                <field name="spotify" style="width: 100%;"/>
                                <field name="youtube" style="width: 100%;"/>
                                <field name="applemusic" style="width: 100%;"/>
                            </group>
                        </group>
                        <!-- Imagen alineada a la derecha -->
                        <group style="width: 25%; display: flex; justify-content: flex-end; align-items: center;">
                            <field name="foto" widget="image" class="oe_avatar" options="{'size': [200, 200]}" style="max-width: 200px; max-height: 200px; border-radius: 10px; border: 2px solid #ccc;"/>
                        </group>
                    </group>

                    <!-- Secci贸n Referido y Saldo -->
                    <group string="Afiliados" col="2" style="width: 100%;">
                        <group style="width: 50%;">
                            <field name="referido_por_id" options="{'always_reload': True}" />
                        </group>
                        <group style="width: 50%;">
                            <field name="saldo" readonly="1"/>
                        </group>
                    </group>

                    <!-- Secci贸n de Canciones -->
                    <group string="Canciones" style="width: 100%;">
                        <field name="canciones_ids">
                            <tree editable="bottom">
                                <field name="nombre"/>
                            </tree>
                        </field>
                    </group>

                    <!--  Nueva Secci贸n: Transacciones -->
                    <group string="Transacciones" style="width: 100%;">
                        <field name="transacciones_ids" readonly="1">
                            <tree>
                                <field name="fecha"/>
                                <field name="tipo_transaccion" decoration-danger="tipo_transaccion == 'retiro'" decoration-success="tipo_transaccion == 'ingreso'"/>
                                <field name="importe"/>
                                <field name="mensaje"/>
                            </tree>
                        </field>
                    </group>

                </sheet>
            </form>
        </field>
    </record>

    <!-- Vista Tree -->
    <record id="view_artista_tree" model="ir.ui.view">
        <field name="name">igb_hispanmusic.artista.tree</field>
        <field name="model">igb_hispanmusic.artista</field>
        <field name="arch" type="xml">
            <tree string="Artistas">
                <field name="foto" widget="image" options="{'size': [100, 100]}"/>
                <field name="nombre_real"/>
                <field name="nombre_artistico"/>
                <field name="canciones_ids" string="Canciones">
                    <tree>
                        <field name="nombre"/>
                    </tree>
                </field>
            </tree>
        </field>
    </record>

    <!-- Vista Kanban -->
    <record id="view_artista_kanban" model="ir.ui.view">
        <field name="name">igb_hispanmusic.artista.kanban</field>
        <field name="model">igb_hispanmusic.artista</field>
        <field name="arch" type="xml">
            <kanban>
                <templates>
                    <t t-name="kanban-box">
                        <!-- Contenedor clickeable -->
                        <div class="oe_kanban_card oe_kanban_global_click" t-att-data-id="record.id.raw_value"
                             style="border: 1px solid #ddd; border-radius: 10px; padding: 10px; text-align: center; width: 220px; background: #f9f9f9; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); cursor: pointer;">

                            <!-- Imagen del artista -->
                            <div style="margin-bottom: 10px;">
                                <img t-att-src="kanban_image('igb_hispanmusic.artista', 'foto', record.id.raw_value)"
                                     class="oe_kanban_image"
                                     style="width:100px;height:100px; border-radius: 50%; border: 2px solid #ccc;"/>
                            </div>

                            <!-- Informaci贸n del artista -->
                            <div>
                                <ul style="list-style: none; padding: 0; text-align: left;">
                                    <li><strong>Nombre Real:</strong> <field name="nombre_real"/></li>
                                    <li><strong>Nombre Art铆stico:</strong> <field name="nombre_artistico"/></li>
                                    <li><strong>Canciones:</strong> <field name="canciones_ids" widget="badge"/></li>
                                </ul>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
</odoo>
